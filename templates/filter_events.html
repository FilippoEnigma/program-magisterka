{% extends "base.html" %}
{% block title %}Filter Events{% endblock %}
{% block content %}
<h2>Filter Events</h2>
<form method="POST" action="{{ url_for('filter_events') }}">
    <div class="form-group">
        <label for="category">Kategoria:</label>
        <select class="form-control" id="category" name="category">
            {% for category in categories %}
                <option value="{{ category.NazwaKategorii }}">{{ category.NazwaKategorii }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="city">Miasto:</label>
        <input type="text" class="form-control" id="city" name="city">
    </div>
    <div class="form-group">
        <label for="country">Kraj:</label>
        <input type="text" class="form-control" id="country" name="country">
    </div>
    <div class="form-group">
        <label for="date_from">Data od:</label>
        <input type="date" class="form-control" id="date_from" name="date_from">
    </div>
    <div class="form-group">
        <label for="date_to">Data do:</label>
        <input type="date" class="form-control" id="date_to" name="date_to">
    </div>
    <div class="form-group">
        <label for="capacity_min">Minimalna pojemność:</label>
        <input type="number" class="form-control" id="capacity_min" name="capacity_min">
    </div>
    <div class="form-group">
        <label for="capacity_max">Maksymalna pojemność:</label>
        <input type="number" class="form-control" id="capacity_max" name="capacity_max">
    </div>
    <div class="form-group">
        <label for="seat_type">Rodzaj miejsc:</label>
        <input type="text" class="form-control" id="seat_type" name="seat_type">
    </div>
    <div class="form-group">
        <label for="price_min">Minimalna cena:</label>
        <input type="number" class="form-control" id="price_min" name="price_min" step="0.01">
    </div>
    <div class="form-group">
        <label for="price_max">Maksymalna cena:</label>
        <input type="number" class="form-control" id="price_max" name="price_max" step="0.01">
    </div>
    <div class="form-check">
        <input type="checkbox" class="form-check-input" id="available_only" name="available_only">
        <label class="form-check-label" for="available_only">Tylko dostępne miejsca</label>
    </div>
    <button type="submit" class="btn btn-primary">Filter</button>
</form>

{% if events %}
    <h3>Filtered Events</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Nazwa wydarzenia</th>
                <th>Data</th>
                <th>Miasto</th>
                <th>Kraj</th>
                <th>Opis</th>
                <th>Limit miejsc</th>
                <th>Dostępne miejsca</th>
                <th>Cena</th>
            </tr>
        </thead>
        <tbody>
            {% for event in events %}
                <tr>
                    <td>{{ event.NazwaWydarzenia }}</td>
                    <td>{{ event.Data }}</td>
                    <td>{{ event.Miasto }}</td>
                    <td>{{ event.Kraj }}</td>
                    <td>{{ event.Opis }}</td>
                    <td>{{ event.LimitMiejsc }}</td>
                    <td>{{ event.DostepneMiejsca }}</td>
                    <td>{{ event.Cena }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}
{% endblock %}
